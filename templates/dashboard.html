{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Welcome Section -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Welcome Ashish</h1>
        <p class="text-gray-600">Here's your loan portfolio overview</p>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Loans Card -->
        <div class="bg-gradient-to-br from-indigo-50 to-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 border border-indigo-100">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-indigo-100 text-indigo-600">
                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="ml-4">
                    <h2 class="text-gray-600 text-sm font-medium mb-1">Total Loans</h2>
                    <p class="text-2xl font-bold text-indigo-600">{{ total_loans }}</p>
                    <p class="text-sm text-gray-500 mt-1">Value: ₹{{ "%.2f"|format(total_amount) }}</p>
                </div>
            </div>
        </div>

        <!-- Active Loans Card -->
        <div class="bg-gradient-to-br from-green-50 to-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 border border-green-100">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-green-100 text-green-600">
                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="ml-4">
                    <h2 class="text-gray-600 text-sm font-medium mb-1">Active Loans</h2>
                    <p class="text-2xl font-bold text-green-600">{{ active_loans }}</p>
                    <p class="text-sm text-green-500 mt-1">In Progress</p>
                </div>
            </div>
        </div>

        <!-- Completed Loans Card -->
        <div class="bg-gradient-to-br from-blue-50 to-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 border border-blue-100">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9 14l2 2 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="ml-4">
                    <h2 class="text-gray-600 text-sm font-medium mb-1">Completed Loans</h2>
                    <p class="text-2xl font-bold text-blue-600">{{ completed_loans }}</p>
                    <p class="text-sm text-blue-500 mt-1">Successfully Closed</p>
                </div>
            </div>
        </div>

        <!-- Total Borrowers Card -->
        <div class="bg-gradient-to-br from-yellow-50 to-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 border border-yellow-100">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 4c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4.78 3.58C19.93 7.21 18.99 7 18 7c-.67 0-1.31.1-1.92.28.58.55.92 1.32.92 2.15V10h5v-.57c0-.81-.48-1.53-1.22-1.85zM6 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.92 1.28C7.31 7.1 6.67 7 6 7c-.99 0-1.93.21-2.78.58C2.48 7.9 2 8.62 2 9.43V10h5v-.57c0-.83.34-1.6.92-2.15zM12 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm5 7h-5v-.57c0-.81-.48-1.53-1.22-1.85C10.93 6.21 10.99 6 10 6c-.67 0-1.31.1-1.92.28.58.55.92 1.32.92 2.15V9H4v12h16V9z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="ml-4">
                    <h2 class="text-gray-600 text-sm font-medium mb-1">Total Borrowers</h2>
                    <p class="text-2xl font-bold text-yellow-600">{{ total_borrowers }}</p>
                    <p class="text-sm text-yellow-500 mt-1">Active Clients</p>
                </div>
            </div>
        </div>
    </div>

    <!-- EMI Progress Section -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h3 class="text-xl font-semibold text-gray-800 mb-6">EMI Payment Progress</h3>
        <div class="space-y-6">
            <div class="flex items-center mb-2">
                <div class="w-full bg-gray-200 rounded-full h-4">
                    {% set payment_percent = (total_paid_amount / total_emi_amount * 100) if total_emi_amount > 0 else 0 %}
                    <div class="bg-gradient-to-r from-indigo-500 to-indigo-600 h-4 rounded-full transition-all duration-500" 
                         style="width: {{ payment_percent }}%"></div>
                </div>
                <span class="ml-4 text-sm font-medium text-gray-600">{{ "%.1f"|format(payment_percent) }}%</span>
            </div>
            
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                <div class="bg-gradient-to-br from-gray-50 to-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <p class="text-sm text-gray-500 mb-1">Total EMI Due</p>
                    <p class="text-lg font-semibold text-gray-800">₹{{ "%.2f"|format(total_emi_amount) }}</p>
                </div>
                <div class="bg-gradient-to-br from-indigo-50 to-white p-4 rounded-lg shadow-sm border border-indigo-100">
                    <p class="text-sm text-gray-500 mb-1">Total Paid</p>
                    <p class="text-lg font-semibold text-indigo-600">₹{{ "%.2f"|format(total_paid_amount) }}</p>
                </div>
                <div class="bg-gradient-to-br from-red-50 to-white p-4 rounded-lg shadow-sm border border-red-100">
                    <p class="text-sm text-gray-500 mb-1">Remaining</p>
                    <p class="text-lg font-semibold text-red-600">₹{{ "%.2f"|format(total_emi_amount - total_paid_amount) }}</p>
                </div>
                <div class="bg-gradient-to-br from-green-50 to-white p-4 rounded-lg shadow-sm border border-green-100">
                    <p class="text-sm text-gray-500 mb-1">Collection Progress</p>
                    <p class="text-lg font-semibold text-green-600">{{ "%.1f"|format(payment_percent) }}%</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 